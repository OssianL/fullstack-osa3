{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newPerson","post","person","put","id","delete","Filter","_ref","onChange","value","react_default","a","createElement","Person","_ref2","onDelete","name","number","onClick","NewPersonForm","_ref3","onSubmit","onNameChange","onNumberChange","type","Notification","_ref4","message","className","Error","_ref5","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","notification","setNotification","_useState11","_useState12","error","setError","useEffect","personService","updatePerson","updatedPerson","window","confirm","map","setTimeout","catch","filteredPersons","toLowerCase","includes","App_Person","removedPerson","key","App_Notification","App_Error","App_Filter","event","target","App_NewPersonForm","preventDefault","oldPerson","find","concat","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.949916f3.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  return axios\n           .get(baseUrl)\n           .then(response => response.data);\n}\n\nconst create = (newPerson) => {\n  return axios\n           .post(baseUrl, newPerson)\n           .then(response => response.data);\n}\n\nconst update = (person) => {\n  return axios\n           .put(baseUrl + \"/\" + person.id, person)\n           .then(response => response.data);\n}\n\nconst remove = (person) => {\n  return axios\n           .delete(baseUrl + \"/\" + person.id)\n           .then(response => response.data);\n}\n\nexport default {getAll, create, update, remove}\n","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\n\nconst Filter = ({onChange, value}) => (\n  <div>\n    rajaa näytettäviä: <input value={value} onChange={onChange}/>\n  </div>\n)\n\nconst Person = ({person, onDelete}) => (\n  <tr>\n    <td>{person.name}</td><td>{person.number}</td><td><button onClick={onDelete}>poista</button></td>\n  </tr>\n)\n\nconst NewPersonForm = ({onSubmit, onNameChange, onNumberChange, name, number}) => (\n  <form onSubmit={onSubmit}>\n    <div>\n      nimi: <input value={name} onChange={onNameChange}/>\n    </div>\n    <div>\n      numero: <input value={number} onChange={onNumberChange}/>\n    </div>\n    <div>\n      <button type=\"submit\">lisää</button>\n    </div>\n  </form>\n)\n\nconst Notification = ({message}) => {\n  if(message === null) return null;\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nconst Error = ({message}) => {\n  if(message == null) return null;\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(persons => setPersons(persons));\n  }, [])\n\n  const handleNameChange = event => setNewName(event.target.value);\n\n  const handleNumberChange = event => setNewNumber(event.target.value);\n\n  const handleFilterChange = event => setFilter(event.target.value);\n\n  const addPerson = event => {\n    event.preventDefault();\n    const newPerson = {name: newName, number: newNumber};\n    const oldPerson = persons.find(person => person.name === newPerson.name);\n    if(oldPerson) {\n      newPerson.id = oldPerson.id;\n      updatePerson(newPerson);\n    }\n    else {\n      personService\n        .create(newPerson)\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson));\n          setNewName('');\n          setNewNumber('');\n          setNotification('lisättiin ' + newPerson.name);\n          setTimeout(() => setNotification(null), 5000);\n        })\n    }\n  }\n\n  const updatePerson = (updatedPerson) => {\n    if(!window.confirm(updatedPerson.name + \" on jo luettelossa, korvataanko vanha numero uudellta?\")) return\n    personService\n      .update(updatedPerson)\n      .then(updatedPerson => {\n        setPersons(persons.map(person => person.id === updatedPerson.id ? updatedPerson : person));\n        setNotification('päivitettiin ' + updatedPerson.name + ' numeroa');\n        setTimeout(() => setNotification(null), 5000);\n      })\n      .catch(error => {\n        setError('henkilö ' + updatedPerson.name + ' on jo poistettu palvelimelta');\n        setTimeout(() => setError(null), 5000);\n      });\n  }\n\n  const deletePerson = (removedPerson) => () => {\n    if(!window.confirm(\"poistetaanko \" + removedPerson.name + \"?\")) return;\n    personService\n      .remove(removedPerson)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== removedPerson.id));\n        setNotification('poistettiin ' + removedPerson.name);\n        setTimeout(() => setNotification(null), 5000);\n      });\n  }\n\n  const filteredPersons = persons\n    .filter(person => person.name.toLowerCase().includes(filter))\n    .map(person => (\n      <Person person={person} onDelete={deletePerson(person)} key={person.name} />\n    ));\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification message={notification} />\n      <Error message={error} />\n      <Filter value={filter} onChange={handleFilterChange} />\n      <h2>Lisää uusi</h2>\n      <NewPersonForm \n        onSubmit={addPerson}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        name={newName}\n        number={newNumber} />\n      <h2>Numerot</h2>\n      <table>\n        <tbody>\n          {filteredPersons}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}